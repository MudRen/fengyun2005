#include <ansi.h>
inherit F_CLEAN_UP;

int main(object me, string arg)
{
	int lvl;

	if( me!=this_player(1) ) return 0;
	if( wiz_level(me) < wiz_level("(arch)") )
		return notify_fail("ä½ çš„å·«å¸ˆç­‰çº§å¤ªä½ï¼Œæ²¡æœ‰ä½¿ç”¨è¿™ä¸ªæŒ‡ä»¤çš„æƒåŠ›ã€‚\n");
	
	if( !arg || arg=="" ) {
		return notify_fail("å½“å‰Questçš„é¢å¤–å¥–åŠ±ä¸ºï¼š"+ QUESTS_D->query_holiday()+" \n");	
	}
	
	if( sscanf(arg, "%d", lvl)!=1 ) 
		return notify_fail("å‚è§HELPæ ¼å¼è¯´æ˜ã€‚\n");
		
	seteuid(getuid());
	
	if (lvl>=0 && lvl<=900) {
	QUESTS_D->set_holiday(lvl);
		write(HIR"\nå½“å‰æ¯ä¸ªQuestçš„å¥–åŠ±ä¸ºåŸæ¥çš„"+ (lvl+100)+"%ï¼Œæœ‰æ•ˆæœŸæŒç»­åˆ°ç³»ç»Ÿé‡å¯æˆ–å†æ¬¡è®¾ç½®ã€‚\n"NOR);
		CHANNEL_D->do_sys_channel("info","å¤©æœºä½¿å‘½ï¼ˆQuestï¼‰çš„ç»éªŒ/èƒ½åŠ›å¥–åŠ±ç°åœ¨è®¾ç½®ä¸º "+(lvl+100)+"ï¼…ï¼Œå¤§å®¶åŠ æ²¹å•Šï¼");
		log_file("QBONUS_UPDATE_LOG", 
					sprintf("(%s)%s æ”¹åŠ¨QUESTå¥–åŠ±åˆ°%dã€‚\n",
   					ctime(time()), 
   					me->name(1)+"("+ me->query("id")+")", 
					lvl,
				));
		return 1;
	}
		
	return notify_fail("ä½ åªèƒ½è®¾ç½®0-900ä¹‹é—´çš„æ•°å­—ã€‚\n");
}

int help (object me)
{
        write(@HELP
[0;1;37mâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€[0m
[0;1;36må·«å¸ˆæŒ‡ä»¤æ ¼å¼ : 	holiday_bonus <æ•°å­—>[0m
[0;1;37mâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€[0m   

æ­¤å‘½ä»¤æ˜¯ç»™ç®¡ç†å·«å¸ˆåŠ¨æ€æ”¹å˜æ¸¸æˆä¸­Questçš„å¥–åŠ±ï¼ˆ0-900ï¼‰

å¥–åŠ± = åŸºæœ¬å¥–åŠ±*ï¼ˆ100+bonusï¼‰/100

ä½ æ‰€èƒ½ä¿®æ”¹çš„ä¾¿æ˜¯è¿™ä¸ªbonusæ•°å€¼ï¼Œæ¯”å¦‚è¯´bonus = 100ç›¸å½“äºåŠ å€å¥–åŠ±

æ¯æ¬¡é‡æ–°å¯åŠ¨åBONUSè‡ªåŠ¨æ¢å¤ä¸º0

æ­¤å‘½ä»¤å½±å“Questæ‰€å¾—çš„ç»éªŒå€¼ã€ä»¥åŠQuestæ‰€å¾—çš„ABILITYå€¼ï¼Œ
æ­¤å‘½ä»¤å½±å“æ‰€æœ‰è°ƒç”¨/adm/daemons/questdä¸­give_rewardå‡½æ•°çš„å¥–åŠ±
æ­¤å‘½ä»¤å¯¹TASKæ²¡æœ‰å½±å“

[0;1;37mâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€[0m  
HELP
);
        return 1;
}
 
