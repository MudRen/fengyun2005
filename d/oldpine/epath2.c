// Room: /d/oldpine/epath2.c

inherit ROOM;

void create()
{
        set("short", "å°çŸ³æ¡¥");
        set("long", @LONG
ä½ çŽ°åœ¨æ­£ç«™åœ¨ä¸€åº§é•¿æ»¡é’è‹”çš„å¤æ¡¥ä¸Šï¼Œæ¡¥ä¸‹æ˜¯ä¸€æ¡å±±æ¶§ï¼Œå‡ è‚¡æ¸…æ³‰åœ¨ä¹±çŸ³ä¹‹ä¸­
å‘å±±ä¸‹å¥”æµï¼Œæ¡¥åŒ—è¾¹ä¸è¿œå¤„æœ‰ä¸€ä¸ª[37mç€‘å¸ƒ[32mï¼Œä»Žå±±å£ä¸ŠçŠ¹å¦‚ä¸€æ¡ç™½ç»ƒèˆ¬åž‚äº†ä¸‹æ¥ï¼Œç€‘å¸ƒ
ä¸¤æ—çš„çŸ³å£ååˆ†é™¡å³­ï¼Œé«˜åº¦å’Œå±±æ¶§æ—çš„æ¾æž—ç›¸å·®äº†è¿‘ä¸‰ã€å››åä¸ˆã€‚
LONG
        );
        set("item_desc", ([
                "waterfall":
                        "è¿™ä¸ªç€‘å¸ƒä»Žæ•°ç™¾ä¸ˆé«˜çš„å±±å£ä¸Šå†²æ¿€è€Œä¸‹ï¼Œæµå…¥ä¸€ä¸ªå±±æ¶§åº•çš„å°æ°´æ½­ï¼Œ\n"
                        "æ°´æ½­ä¸¤è¾¹çš„çŸ³å£åž‚ä¸‹è®¸å¤šçš„[37mè—¤è”“[32m(vine)ï¼Œä½ æ³¨æ„åˆ°ç€‘å¸ƒå¾Œé¢ä¼¼ä¹Ž\n"
                        "æœ‰ä»€éº½ä¸œè¥¿åœ¨å‘è‘—å…‰ã€‚\n",
                "ç€‘å¸ƒ":
                        "è¿™ä¸ªç€‘å¸ƒä»Žæ•°ç™¾ä¸ˆé«˜çš„å±±å£ä¸Šå†²æ¿€è€Œä¸‹ï¼Œæµå…¥ä¸€ä¸ªå±±æ¶§åº•çš„å°æ°´æ½­ï¼Œ\n"
                        "æ°´æ½­ä¸¤è¾¹çš„çŸ³å£åž‚ä¸‹è®¸å¤šçš„[37mè—¤è”“[32m(vine)ï¼Œä½ æ³¨æ„åˆ°ç€‘å¸ƒå¾Œé¢ä¼¼ä¹Ž\n"
                        "æœ‰ä»€éº½ä¸œè¥¿åœ¨å‘è‘—å…‰ã€‚\n",
                "vine":
                        "å…¶ä¸­æœ‰ä¸€æ ¹è—¤è”“è·ç¦»ä½ æ¯”è¾ƒè¿‘ï¼Œä½ å¯ä»¥è¯•è‘—æŠ“ä½(hold)è—¤è”“ï¼Œçœ‹çœ‹\n"
                        "èƒ½ä¸èƒ½è¡è¿‡åŽ»ï¼Œä¹Ÿè®¸å¯ä»¥çŸ¥é“ç€‘å¸ƒå¾Œé¢æœ‰ä»€éº½ï¼Ÿ\n"
                        "å¯¹äº†ï¼Œæé†’ä½ ä¸€ç‚¹ï¼Œè¿™åº§çŸ³æ¡¥ä¸‹é¢æ˜¯é«˜çº¦ç™¾ä¸ˆçš„å±±æ¶§æ·±è°·....ã€‚\n"
        ]) );
        set("exits", ([ /* sizeof() == 2 */
	  "west" : __DIR__"epath1",
	  "east" : __DIR__"epath3",
	]));
        set("outdoors", "oldpine");

	set("coor/x",0);
	set("coor/y",30);
	set("coor/z",30);
	setup();
}

void init()
{
        add_action("do_hold_vine", ({ "hold", "grab" }) );
}

int do_hold_vine(string arg)
{
        if( !arg || arg!= "vine" )
                return notify_fail("ä½ è¦æŠ“ä½ä»€éº½ï¼Ÿ\n");
        message_vision("$Nçˆ¬ä¸ŠçŸ³æ¡¥çš„æŠ¤æ ï¼Œä¼¸æ‰‹å¾€ä¸è¿œå¤„çš„ä¸€æ ¹è—¤è”“æŠ“åŽ»....\n",
                this_player());
        if( random((int)this_player()->query_skill("dodge")) < 5 ) {
                message_vision("\nåªå¬è§ä¸€å£°æ€çŒªèˆ¬çš„æƒ¨å«ï¼Œ$Nå·²ç»å¾€å±±æ¶§ä¸­å äº†ä¸‹åŽ»ã€‚\n\n", this_player());
                tell_room(__DIR__"waterfall",
                        "ä½ å¬åˆ°æœ‰äººé«˜å£°æƒŠå«ï¼Œä¸€æ¡äººå½±ä»Žä¸Šæ–¹æŽ‰äº†ä¸‹æ¥ï¼Œã€Œæ‰‘é€šã€ä¸€å£°è·Œè¿›æ½­ä¸­ã€‚\n");
                this_player()->move(__DIR__"waterfall");
        } else {
                message_vision("$Næ‰‹è„šä¿è½åœ°æ”€é™„è‘—è—¤è”“ï¼Œæ…¢æ…¢åœ°çˆ¬ä¸‹å±±æ¶§....ã€‚\n",
                        this_player() );
                tell_room(__DIR__"passage",
                        "å¿½ç„¶ä¸€æ¡äººå½±ä»Žå—è¾¹çš„å¸˜å¹•ç©¿äº†å‡ºæ¥ã€‚\n");
                this_player()->move(__DIR__"passage");
        }
        return 1;
}
